webpackJsonp([0],{133:function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(28);\n\nvar _reactRouter = __webpack_require__(14);\n\nvar _Button = __webpack_require__(52);\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _EditText = __webpack_require__(53);\n\nvar _EditText2 = _interopRequireDefault(_EditText);\n\nvar _util = __webpack_require__(27);\n\nvar _Const = __webpack_require__(13);\n\nvar _actions = __webpack_require__(51);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n__webpack_require__(135);\n\nvar Login = function (_Component) {\n\t_inherits(Login, _Component);\n\n\tfunction Login(props) {\n\t\t_classCallCheck(this, Login);\n\n\t\treturn _possibleConstructorReturn(this, (Login.__proto__ || Object.getPrototypeOf(Login)).call(this, props));\n\t}\n\n\t_createClass(Login, [{\n\t\tkey: 'componentDidMount',\n\t\tvalue: function componentDidMount() {\n\t\t\tif (localStorage.getItem('account') !== null) {\n\t\t\t\tthis.props.dispatch((0, _actions.updateEditText)(localStorage.getItem('account'), 0));\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'componentWillReceiveProps',\n\t\tvalue: function componentWillReceiveProps(nextProps) {\n\t\t\tif (nextProps.status === 1) {\n\t\t\t\tif (nextProps.data.code === 200) {\n\t\t\t\t\talert('login success');\n\t\t\t\t\t_reactRouter.browserHistory.replace('/');\n\t\t\t\t} else {\n\t\t\t\t\talert('login fail');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'handleChange',\n\t\tvalue: function handleChange(child, id, value) {\n\t\t\tvar kind = _Const.LOGIN;\n\t\t\tswitch (id) {\n\t\t\t\tcase 'account':\n\t\t\t\t\tkind += _Const.ACCOUNT;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'password':\n\t\t\t\t\tkind += _Const.PASSWORD;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar parent = child._reactInternalInstance._currentElement._owner._instance;\n\t\t\tparent.props.dispatch((0, _actions.updateEditText)(value, kind));\n\t\t\tconsole.log('handleChange');\n\t\t}\n\t}, {\n\t\tkey: 'logon',\n\t\tvalue: function logon() {\n\t\t\t_reactRouter.browserHistory.push('/logon');\n\t\t}\n\t}, {\n\t\tkey: 'login',\n\t\tvalue: function login() {\n\t\t\tconsole.log('submit');\n\t\t\tvar dispatch = this._reactInternalInstance._currentElement._owner._instance.props.dispatch;\n\t\t\tdispatch = dispatch === undefined ? this.props.dispatch : dispatch;\n\t\t\tvar account = document.querySelector('#account').firstChild.value;\n\t\t\tvar password = document.querySelector('#password').firstChild.value;\n\t\t\tif (account.trim().length > 0 && password.trim().length > 0) {\n\t\t\t\tpassword = (0, _util.RSAEncrypt)(password);\n\t\t\t\tdispatch((0, _actions.updateEditText)(password, 1));\n\t\t\t\tlocalStorage.setItem('account', account);\n\t\t\t\tdispatch((0, _actions.fetchDataIfNeed)({\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tpath: '/login',\n\t\t\t\t\tcategory: _Const.LOGIN,\n\t\t\t\t\tquery: {\n\t\t\t\t\t\taccount: account,\n\t\t\t\t\t\tpassword: password\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t} else if (account.trim().length === 0) {\n\t\t\t\talert('账号不能为空！');\n\t\t\t} else if (password.trim().length === 0) {\n\t\t\t\talert('密码不能为空！');\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'handleKeyDown',\n\t\tvalue: function handleKeyDown(e) {\n\t\t\tif (e.keyCode === 13) {\n\t\t\t\tconsole.log('keyboard submit');\n\t\t\t\tthis.login();\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'componentWillUnmount',\n\t\tvalue: function componentWillUnmount() {\n\t\t\tthis.props.dispatch({ type: _Const.CLEAR });\n\t\t}\n\t}, {\n\t\tkey: 'render',\n\t\tvalue: function render() {\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t'div',\n\t\t\t\tnull,\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t'h1',\n\t\t\t\t\tnull,\n\t\t\t\t\t'\\u767B\\u5F55\\u9875'\n\t\t\t\t),\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ onKeyDown: this.handleKeyDown.bind(this) },\n\t\t\t\t\t_react2.default.createElement(_EditText2.default, { margin: '.2rem 0 0 0', value: this.props.account, onChange: this.handleChange, id: 'account', type: 'text', placeholder: '\\u8F93\\u5165\\u4F60\\u7684\\u8D26\\u53F7', name: 'account' }),\n\t\t\t\t\t_react2.default.createElement(_EditText2.default, { margin: '.2rem 0 0 0', value: this.props.password, onChange: this.handleChange, id: 'password', type: 'password', placeholder: '\\u8F93\\u5165\\u4F60\\u7684\\u5BC6\\u7801', name: 'password' }),\n\t\t\t\t\t_react2.default.createElement('div', { style: {\n\t\t\t\t\t\t\tpaddingTop: '1rem'\n\t\t\t\t\t\t} }),\n\t\t\t\t\t_react2.default.createElement(_Button2.default, { onClick: this.login, id: 'login', width: '100%', height: '4rem', radius: '.5rem', margin: '2% auto 2% auto', fontSize: '1.8rem', text: ' \\u767B \\u5F55 ' }),\n\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: 'feedback' },\n\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\t{ onClick: this.logon.bind(this), id: 'logon' },\n\t\t\t\t\t\t\t'\\u6CE8\\u518C\\u65B0\\u8D26\\u53F7'\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}]);\n\n\treturn Login;\n}(_react.Component);\n\nLogin.PropTypes = {\n\tstatus: _react.PropTypes.number,\n\tdata: _react.PropTypes.object.isRequired,\n\taccount: _react.PropTypes.string.isRequired,\n\tpassword: _react.PropTypes.string.isRequired\n};\n\nLogin.defaultProps = {\n\tstatus: -3,\n\tdata: {},\n\taccount: '',\n\tpassword: ''\n};\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tstatus: state.loginReducer.status,\n\t\tdata: state.loginReducer.data,\n\t\taccount: state.loginReducer.account,\n\t\tpassword: state.loginReducer.password\n\t};\n}\n\nmodule.exports = (0, _reactRedux.connect)(mapStateToProps)(Login);\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/views/Login.js\n// module id = 133\n// module chunks = 0\n\n//# sourceURL=webpack:///./app/views/Login.js?")},135:function(module,exports,__webpack_require__){eval('exports = module.exports = __webpack_require__(134)();\n// imports\n\n\n// module\nexports.push([module.i, ".feedback{color:orange}", ""]);\n\n// exports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/style/Login.less\n// module id = 135\n// module chunks = 0\n\n//# sourceURL=webpack:///./app/style/Login.less?')}});